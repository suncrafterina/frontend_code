<div class="adminContentMain">
    <div class="breadcrumbsListing">
        <ul>
            <li><a routerLink="/warehouse/warehouse-pages">{{'Common.warehouses' | translate}}</a></li>
            <li>{{ pageTitle }}</li>
        </ul>
    </div>
    <div class="adminContentInner">
        <div class="adminContentHeader">
            <div class="adminContentTitle">
                <div class="acTitleIcon"><span class="material-icons"> home_work </span></div>
                <div class="acTitleText">{{ pageTitle }} {{'Common.warehouse' | translate}}</div>
            </div>
            <div class="acTitleRight">            
                <a routerLink="/warehouse/warehouse-pages" class="hytx-btn hytx-btn-black-outline">{{'Common.back' | translate}}</a>               
            </div>
        </div>
        <div class="adminContentMiddle">
            <!-- Admin Form Start -->
            <div class="adminContentFormMain formInTwoColumn">
                <form [formGroup]="warehouseForm" (ngSubmit)="(!warehouseId) ? submitWarehouse() : editWarehouse(warehouseId)" autocomplete="off">
                    <div class="hytx-row">
                        <div class="hytx-col-12">
                            <div class="savedImageBoxCover">
                                <!-- Images selected or already present(when edit) -->
                                <div class="UploadImageBoxCover" *ngFor="let url of images; let indexElement = index;">
                                    <div class="avatar">
                                        <img [src]="url" alt="Warehouse Images">
                                    </div>
                                    <!-- .avtarFavrt.active-->
                                    <div *ngIf="isFavourite[indexElement]; else notFavourite" class="avtarFavrt active" (click)="favroiteImage(indexElement)"><span class="material-icons"> grade </span></div>
                                    <!-- .avtarFavrt-->
                                    <ng-template #notFavourite>
                                        <div class="avtarFavrt" (click)="favroiteImage(indexElement)"><span class="material-icons"> grade </span></div>
                                    </ng-template>
                                    <div class="avtarRemoveLink browseBtnTxt" (click) = "removeImage(indexElement)">{{'Common.remove' | translate}}</div>
                                </div>
                                <!-- Image File Selector  -->
                                <div class="UploadImageBoxCover" *ngIf="imgArr.length<=4">
                                    <i class="icon icon-account_circle" *ngIf="!imgPreview"></i>  
                                    <div class="avatar">
                                        <img src="assets/images/avtar-image.png" alt="Profile Image"> 
                                    </div>
                                    <div class="browseBtnTxt"><span (click)="file.click()" >{{'Common.addImage' | translate}}</span></div>
                                    <!-- <input type="file" name="myfile" #file accept="image/*" multiple="" (change)="fileChange($event)" (click)="file.value = null" class="display-none"> -->
                                    <input type="file" name="myfile" #file accept="image/*" (change)="fileChange($event)" (click)="file.value = null" class="display-none">                                 
                                    <div class="mat-error error-div" *ngIf="imageError">
                                        {{imageError}}
                                    </div>
                                    <mat-error *ngIf="imgSubmitted">{{ hasError('warehouse_images') }}</mat-error> 
                                </div>
                                <!-- End Image File Selector  -->
                            </div>
                        </div>
                    </div>
                    <div *ngIf="disabled" class="hytx-row">
                        <div class="hytx-col-12">
                            <mat-form-field class="full-width">
                                <input matInput formControlName="warehouse_code" [errorStateMatcher]="matcher" 
                                    placeholder="{{'Common.warehouseCode' | translate}} *" autocomplete="off"/>
                                <!-- <mat-error *ngIf="hasError('description')">{{ hasError('description') }}</mat-error>     -->
                            </mat-form-field>
                        </div>
                    </div>
                    <div class="hytx-row">
                        <div class="hytx-col-12">
                            <mat-form-field class="full-width">
                                <input matInput formControlName="warehouse_name" [errorStateMatcher]="matcher" 
                                    placeholder="{{'Common.warehouseName' | translate}} *" autocomplete="off" />
                                <mat-error *ngIf="hasError('warehouse_name')">{{ 'errorMessage.' + hasError('warehouse_name') | translate }}</mat-error>
                            </mat-form-field>
                        </div>
                    </div>
                    <div class="hytx-row">
                        <div class="hytx-col-12">
                            <mat-form-field class="full-width">
                                <textarea matInput formControlName="description" [errorStateMatcher]="matcher" 
                                    placeholder="{{'Common.description' | translate}} *" autocomplete="off"></textarea>
                                <mat-error *ngIf="hasError('description')">{{ 'errorMessage.' + hasError('description') | translate}}</mat-error>    
                            </mat-form-field>
                        </div>
                    </div>
                    <div class="hytx-row">
                        <div class="hytx-col-sm-6">
                            <mat-form-field class="full-width">
                                <input matInput formControlName="email_address" [errorStateMatcher]="matcher" 
                                    placeholder="{{'Common.emailAddress' | translate}} *" autocomplete="off" />
                                <mat-error *ngIf = "hasError('email_address')">{{ 'errorMessage.' + hasError('email_address') | translate }}</mat-error>    
                            </mat-form-field>
                        </div>
                        <div class="hytx-col-sm-6">
                            <mat-form-field class="full-width">
                                <input matInput formControlName="phone_number" [errorStateMatcher]="matcher"
                                    placeholder="{{'Common.phoneNumber' | translate}}" autocomplete="off"/>
                                <mat-error *ngIf="hasError('phone_number')"> {{ 'errorMessage.' + hasError('phone_number') | translate }} </mat-error>    
                            </mat-form-field>
                        </div>
                    </div>
                    <div class="hytx-row">
                        <div class="hytx-col-sm-6">
                            <mat-form-field class="full-width">
                                <input matInput formControlName="address_line_1" [errorStateMatcher]="matcher"
                                    placeholder="{{'Common.addressLine1' | translate}}" autocomplete="off"/>
                                <mat-error *ngIf="hasError('address_line_1')"> {{ 'errorMessage.' + hasError('address_line_1') | translate }} </mat-error>
                            </mat-form-field>
                        </div>
                        <div class="hytx-col-sm-6">
                            <mat-form-field class="full-width">
                                <input matInput formControlName="address_line_2" [errorStateMatcher]="matcher"
                                    placeholder="{{'Common.addressLine2' | translate}}" autocomplete="off"/>
                                    <mat-error *ngIf="hasError('address_line_2')"> {{ 'errorMessage.' + hasError('address_line_2') | translate }} </mat-error>
                            </mat-form-field>
                        </div>
                    </div>
                    <div class="hytx-row">
                        <div class="hytx-col-sm-6">
                            <mat-form-field class="full-width">
                                <mat-label>{{'Common.country' | translate}} *</mat-label>
                                <mat-select [ngModel] = "countryObject?.id" formControlName="country" (selectionChange)="onChangeCountry($event)">
                                    <mat-option *ngFor="let country of countries" [value]="country.id">
                                        {{ country.name }}
                                    </mat-option>
                                </mat-select>
                                <mat-error *ngIf="hasError('country')"> {{ 'errorMessage.' + hasError('country') | translate }} </mat-error>
                            </mat-form-field>
                        </div>
                        <div class="hytx-col-sm-6">
                            <mat-form-field class="full-width">
                                <mat-label>{{'Common.state' | translate}} *</mat-label>
                                <mat-select [ngModel] = "stateObject?.id" formControlName="state" (selectionChange)="onStateChange($event)">
                                    <mat-option *ngFor="let state of states" [value]="state.id">{{ state.name }}</mat-option>                                                
                                </mat-select>
                                <mat-error *ngIf = "hasError('state')"> {{ 'errorMessage.' + hasError('state') | translate}} </mat-error>
                            </mat-form-field>
                        </div>
                    </div>
                    <div class="hytx-row">
                        <div class="hytx-col-sm-6">
                            <mat-form-field class="full-width">
                                <mat-label>{{'Common.city' | translate}} *</mat-label>
                                <mat-select [ngModel] = "cityObject?.id" formControlName="city" (selectionChange)="onCityChange($event)">
                                    <mat-option *ngFor="let city of cities"  [value]="city.id">{{city.name}}</mat-option>
                                </mat-select>
                                <mat-error *ngIf = "hasError('city')"> {{ 'errorMessage.' + hasError('city') | translate }} </mat-error>
                            </mat-form-field>
                        </div>
                        <div class="hytx-col-sm-6">
                            <mat-form-field class="full-width">
                                <input matInput formControlName="zip_code" [errorStateMatcher]="matcher" 
                                    placeholder="{{'Common.zipCode' | translate}}" autocomplete="off" />
                                <mat-error *ngIf="hasError('zip_code')"> {{ 'errorMessage.' + hasError('zip_code') | translate }} </mat-error>    
                            </mat-form-field>
                        </div>                              
                    </div>
                    <div class="hytx-row">
                        <div class="hytx-col-sm-6">
                            <mat-form-field class="full-width">
                                <input matInput formControlName="warehouse_size" [errorStateMatcher]="matcher" 
                                    placeholder="{{'Common.warehouseSize' | translate}} *" autocomplete="off" />
                                <span matSuffix>sq. ft.</span>
                                <mat-error *ngIf="hasError('warehouse_size')">{{ 'errorMessage.' + hasError('warehouse_size') | translate }}</mat-error>
                            </mat-form-field>
                        </div> 
                        <div class="hytx-col-sm-6">
                            <mat-form-field class="full-width">
                                <mat-label>{{'Common.buildYear' | translate}} *</mat-label>
                                <mat-select formControlName="build_year" [ngModel] = "buildYearObject?.id">
                                    <mat-option *ngFor="let year of years" [value]="year.id">{{ year.year }}</mat-option>
                                </mat-select>
                                <mat-error *ngIf="hasError('build_year')"> {{ 'errorMessage.' + hasError('build_year') | translate }} </mat-error>
                            </mat-form-field>
                        </div>                             
                    </div>
                    <div class="hytx-row">
                        <div class="hytx-col-sm-6">
                            <mat-form-field class="full-width">
                                <input matInput formControlName="available_space" placeholder="{{'Common.availableSpace' | translate}} *" 
                                    [errorStateMatcher]="matcher" autocomplete="off" />
                                <span matSuffix>{{'Common.sq.ft.' | translate}}</span>
                                <mat-error *ngIf="hasError('available_space')">{{ 'errorMessage.' + hasError('available_space') | translate }}</mat-error>
                            </mat-form-field>
                        </div>                            
                    </div>
                    <div class="hytx-row">
                        <div class="hytx-col-12 mb20">
                            <label class="mat-check-label">{{'Common.Amenities & Facilities' | translate}}</label>
                            <div class="full-width" *ngFor="let amenity of amenities;  let indexElement = index;">                                
                                <mat-checkbox [checked]="amenity.is_checked" [value]="amenity.key" (change)="onCheckboxChange($event, indexElement)" color="primary">
                                <!-- [checked]= "onCheckCondition(amenity.key)"  -->
                                    {{ amenity.value }}
                                </mat-checkbox>
                            </div>
                        </div>                            
                    </div>
                    <div class="hytx-row">
                        <div class="hytx-col-12 hytx-from-buttons">
                            <button class="hytx-btn hytx-btn-orange" type="submit">{{ 'Common.' + pageTitle | translate }}</button>
                            <button class="hytx-btn hytx-btn-black-outline" [disabled]="disabled" (click)="resetForm()">{{'Common.reset' | translate}}</button>
                        </div>
                    </div>
                </form>
            </div>
            <!-- Admin Form End -->
        </div>
    </div>
</div>